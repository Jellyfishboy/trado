<% content_for :title, "Your #{Store::settings.name} order ##{@order.id} has been unsuccessful" %>
<% content_for :header_1, Store::settings.name %>
<% content_for :header_2, "Order unsuccessful" %>

Order #<%= @order.id %>

Hello,

Unfortunately your order was unsuccessful. 

<% unless @order.transactions.last.status_reason.nil? %>
Your order was unsuccessful for the following reason(s): 
<%= @order.transactions.last.status_reason %>
<% end %>

Your delivery option
---------------------
<%= @order.delivery.name %>

Your delivery address
---------------------
<%= @order.delivery_address.full_name %>

<%= @order.delivery_address.address %>
<%= @order.delivery_address.city %>
<%= @order.delivery_address.postcode %>
<%= @order.delivery_address.country %>

<%= @order.delivery_address.telephone %>

Payment method
---------------------

Your billing address
---------------------
<%= @order.billing_address.full_name %>

<%= @order.billing_address.address %>
<%= @order.billing_address.city %>
<%= @order.billing_address.postcode %>
<%= @order.billing_address.country %>

<%= @order.billing_address.telephone %>

Order details
---------------------
Order #<%= @order.id %>
Placed on <%= @order.updated_at.strftime("#{@order.updated_at.day.ordinalize} %b %Y") %>

<% @order.order_items.each do |item| %>
    <%= item.sku.product.name %> | <%= Store::Price.new(item.price, 'net').format %> | <%= item.quantity %> | <%= Store::Price.new(item.total_price, 'net').format %>
<% end %>

Subtotal: <%= Store::Price.new(@order.net_amount, 'net').format %>
Delivery & handling: <%= Store::Price.new(@order.delivery.price, 'net').format %>
Total before <%= Store::settings.tax_name %>: <%= Store::Price.new(@order.net_amount, 'net').format %>
<%= Store::settings.tax_name %>: <%= Store::Price.new(@order.tax_amount, 'net').format %>
Total: <%= Store::Price.new(@order.gross_amount, 'net').format %>

If you would like assistance with your order, please don't hesitate to contact us at support@trado.io, quoting your order number.